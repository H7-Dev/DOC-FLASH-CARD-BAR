00.33 [-s-backend] üî∏üëç Implementa√ß√£o da classe DropdownManager

**Documenta√ß√£o DropdownManager**

**√çndice:**
1. [Vis√£o Geral](#vis√£o-geral)
2. [Vers√£o](#vers√£o)
3. [Construtor da Classe](#construtor-da-classe)
4. [Configura√ß√µes e Propriedades da Classe](#configura√ß√µes-e-propriedades-da-classe)
5. [M√©todos da Classe](#m√©todos-da-classe)
6. [Eventos (DOMContentLoaded)](#eventos-domcontentloaded)
7. [Valida√ß√µes](#valida√ß√µes)
8. [Exemplo B√°sico](#exemplo-b√°sico)
9. [Op√ß√µes de Configura√ß√µes](#op√ß√µes-de-configura√ß√µes)
10. [Como Instanciar](#como-instanciar)
11. [C√≥digo da Classe Completo + Coment√°rio de Documenta√ß√£o](#c√≥digo-da-classe-completo--coment√°rio-de-documenta√ß√£o)
12. [Ilustra√ß√£o](#ilustra√ß√£o)

# Vis√£o Geral

A classe `DropdownManager` √© uma utilidade JavaScript que facilita o gerenciamento de dropdowns em uma p√°gina da web. Ela permite a configura√ß√£o din√¢mica de seletores, classes CSS e outros par√¢metros essenciais para personalizar o comportamento dos dropdowns.

# Vers√£o

Vers√£o 1.0.0

# Construtor da Classe

1. O construtor da classe aceita um objeto options como argumento, que cont√©m op√ß√µes de configura√ß√£o para o gerenciamento dos dropdowns. As op√ß√µes incluem seletores CSS para os elementos do dropdown, √≠cones, bot√µes de op√ß√£o e muito mais.

2. O construtor adiciona um ouvinte de evento DOMContentLoaded para chamar o m√©todo initializeDropdowns assim que a p√°gina estiver totalmente carregada.

## DropdownManager(options)

Cria uma nova inst√¢ncia do `DropdownManager`.

### Par√¢metros

- `options` (Object): Um objeto contendo op√ß√µes de configura√ß√£o para a classe.

# Configura√ß√µes e Propriedades da Classe

- `dropDownSelector` (string): Seletor para os elementos de dropdown.
- `iconFilterSlashSelector` (string): Seletor para os √≠cones de filtro slash.
- `btnOpcaoSelector` (string): Seletor para os bot√µes de op√ß√£o.
- `opcaoSelector` (string): Seletor para os elementos de op√ß√£o.
- `iconCaretDownSelector` (string): Seletor para os √≠cones de seta para baixo.
- `dropDownOpcoesSelector` (string): Seletor para as op√ß√µes do dropdown.
- `defaultText` (string, opcional): Texto padr√£o exibido nos campos de entrada readonly. (Padr√£o: "Escolher Op√ß√£o")
- `dropdownInputSelector` (string, opcional): Seletor para os campos de entrada readonly. (Padr√£o: "input[readonly]")
- `hiddenInputSelector` (string, opcional): Seletor para os campos de entrada hidden. (Padr√£o: "input[type='hidden']")
- `iconFilterClass` (string, opcional): Classe CSS para os √≠cones de filtro. (Padr√£o: ".icon-filter")
- `iconFilterSlashClass` (string, opcional): Classe CSS para os √≠cones de filtro slash. (Padr√£o: ".icon-filter-slash")
- `iconCaretDownClass` (string, opcional): Classe CSS para os √≠cones de seta para baixo. (Padr√£o: ".icon-caret-down")
- `ocultarClass` (string, opcional): Classe CSS para ocultar elementos. (Padr√£o: ".ocultar")
- `dropDownOpcoesActiveClass` (string, opcional): Classe CSS para o estado ativo das op√ß√µes do dropdown. (Padr√£o: "drop-down-opcoes-active")

# M√©todos da Classe

- `initializeDropdowns()`: Inicializa os dropdowns e configura os ouvintes de eventos.
- `addIconFilterSlashClickListeners()`: Adiciona ouvintes de eventos aos √≠cones de filtro slash para redefinir os dropdowns.
- `setDropdownOpcoesWidth()`: Define a largura das op√ß√µes do dropdown para corresponder √† largura do dropdown pai.
- `positionDropdownOpcoes()`: Posiciona as op√ß√µes do dropdown abaixo dos dropdowns correspondentes.
- `addIconClickListeners()`: Adiciona ouvintes de eventos aos √≠cones de seta para baixo para abrir e fechar os dropdowns.
- `toggleDropdown(index)`: Alterna a exibi√ß√£o das op√ß√µes do dropdown.
- `toggleIconCaretDownActive(iconCaretDown)`: Alterna a classe CSS ativa nos √≠cones de seta para baixo.
- `printDropdowns()`: Imprime informa√ß√µes sobre os dropdowns no console.

# Eventos (DOMContentLoaded)

A classe `DropdownManager` √© inicializada automaticamente ap√≥s o evento `DOMContentLoaded` ser acionado.

# Valida√ß√µes

Certifique-se de ajustar os seletores, classes CSS e outras configura√ß√µes de acordo com a sua estrutura HTML real antes de us√°-la.

# Exemplo B√°sico

```javascript
const options = {
    dropDownSelector: '.drop-down',
    iconFilterSlashSelector: '.icon-filter-slash',
    // ...outras op√ß√µes...
};

const dropdownManager = new DropdownManager(options);
```

# Op√ß√µes de Configura√ß√µes

Voc√™ pode personalizar as configura√ß√µes da classe passando um objeto de op√ß√µes ao criar uma inst√¢ncia do `DropdownManager`. Consulte a se√ß√£o "Como Instanciar" para obter um exemplo de como fazer isso.

# Como Instanciar

Para criar uma inst√¢ncia do `DropdownManager`, siga este exemplo:

```javascript
const options = {
    dropDownSelector: '.drop-down',
    iconFilterSlashSelector: '.icon-filter-slash',
    // ...outras op√ß√µes...
};

const dropdownManager = new DropdownManager(options);
```

# C√≥digo da Classe Completo + Coment√°rio de Documenta√ß√£o

[Veja o c√≥digo da classe completa com coment√°rios de documenta√ß√£o](#c√≥digo-da-classe-completo--coment√°rio-de-documenta√ß√£o).

```JS
/**
 * Classe para gerenciar dropdowns em uma p√°gina web.
 */
class DropdownManager {
    /**
     * Cria uma nova inst√¢ncia do DropdownManager.
     * @param {Object} options - Objeto contendo op√ß√µes de configura√ß√£o.
     * @param {string} options.dropDownSelector - Seletor para os elementos de dropdown.
     * @param {string} options.iconFilterSlashSelector - Seletor para os √≠cones de filtro slash.
     * @param {string} options.btnOpcaoSelector - Seletor para os bot√µes de op√ß√£o.
     * @param {string} options.opcaoSelector - Seletor para os elementos de op√ß√£o.
     * @param {string} options.iconCaretDownSelector - Seletor para os √≠cones de seta para baixo.
     * @param {string} options.dropDownOpcoesSelector - Seletor para as op√ß√µes do dropdown.
     * @param {string} [options.defaultText="Escolher Op√ß√£o"] - Texto padr√£o exibido nos campos de entrada readonly.
     * @param {string} [options.dropdownInputSelector="input[readonly]"] - Seletor para os campos de entrada readonly.
     * @param {string} [options.hiddenInputSelector="input[type='hidden']"] - Seletor para os campos de entrada hidden.
     * @param {string} [options.iconFilterClass=".icon-filter"] - Classe CSS para os √≠cones de filtro.
     * @param {string} [options.iconFilterSlashClass=".icon-filter-slash"] - Classe CSS para os √≠cones de filtro slash.
     * @param {string} [options.iconCaretDownClass=".icon-caret-down"] - Classe CSS para os √≠cones de seta para baixo.
     * @param {string} [options.ocultarClass=".ocultar"] - Classe CSS para ocultar elementos.
     * @param {string} [options.dropDownOpcoesActiveClass="drop-down-opcoes-active"] - Classe CSS para o estado ativo das op√ß√µes do dropdown.
     */
    constructor(options) {
        // Configura√ß√£o inicial com valores padr√£o ou fornecidos nas op√ß√µes.
        this.dropDownSelector = options.dropDownSelector || '.drop-down';
        this.iconFilterSlashSelector = options.iconFilterSlashSelector || '.icon-filter-slash';
        this.btnOpcaoSelector = options.btnOpcaoSelector || '.btn-opcao';
        this.opcaoSelector = options.opcaoSelector || '.opcao';
        this.iconCaretDownSelector = options.iconCaretDownSelector || '.icon-caret-down';
        this.dropDownOpcoesSelector = options.dropDownOpcoesSelector || '.drop-down-opcoes';
        this.defaultText = options.defaultText || 'Escolher Op√ß√£o';
        this.dropdownInputSelector = options.dropdownInputSelector || 'input[readonly]';
        this.hiddenInputSelector = options.hiddenInputSelector || 'input[type="hidden"]';
        this.iconFilterClass = options.iconFilterClass || '.icon-filter';
        this.iconFilterSlashClass = options.iconFilterSlashClass || '.icon-filter-slash';
        this.iconCaretDownClass = options.iconCaretDownClass || '.icon-caret-down';
        this.ocultarClass = options.ocultarClass || '.ocultar';
        this.dropDownOpcoesActiveClass = options.dropDownOpcoesActiveClass || 'drop-down-opcoes-active';
        this.iconCaretDownActiveClass = options.iconCaretDownActiveClass || 'active'; // Substitua 'active' pelo valor padr√£o desejado

        // Aguarda o evento DOMContentLoaded antes de inicializar os dropdowns.
        document.addEventListener('DOMContentLoaded', () => {
            this.initializeDropdowns();
        });
    }

    /**
     * Inicializa os dropdowns e configura os ouvintes de eventos.
     */
    initializeDropdowns() {
        this.dropDowns = document.querySelectorAll(this.dropDownSelector);
        this.setDropdownOpcoesWidth();
        this.addIconClickListeners();
        this.printDropdowns();
        this.addIconFilterSlashClickListeners();
    }

    /**
     * Adiciona ouvintes de eventos aos √≠cones de filtro slash para redefinir os dropdowns.
     */
    addIconFilterSlashClickListeners() {
        const iconFilterSlashes = document.querySelectorAll(this.iconFilterSlashSelector);

        iconFilterSlashes.forEach((iconFilterSlash) => {
            iconFilterSlash.addEventListener('click', () => {
                const dropDown = iconFilterSlash.closest(this.dropDownSelector);

                if (dropDown) {
                    const dropdownInput = dropDown.querySelector(this.dropdownInputSelector);
                    const hiddenInput = dropDown.querySelector(this.hiddenInputSelector);

                    if (dropdownInput) {
                        dropdownInput.value = this.defaultText;
                    }

                    if (hiddenInput) {
                        hiddenInput.value = "";
                    }
                }
            });
        });
    }

    /**
     * Define a largura das op√ß√µes do dropdown para corresponder √† largura do dropdown pai.
     */
    setDropdownOpcoesWidth() {
        this.dropDowns.forEach((dropDown) => {
            const dropDownOpcoes = dropDown.nextElementSibling;

            if (dropDownOpcoes) {
                const dropDownWidth = dropDown.offsetWidth;
                dropDownOpcoes.style.width = dropDownWidth + 'px';
            }
        });
    }

    /**
     * Posiciona as op√ß√µes do dropdown abaixo dos dropdowns correspondentes.
     */
    positionDropdownOpcoes() {
        this.dropDowns.forEach((dropDown) => {
            const dropDownOpcoes = dropDown.nextElementSibling;

            if (dropDownOpcoes) {
                const dropDownRect = dropDown.getBoundingClientRect();
                dropDownOpcoes.style.left = dropDownRect.left + 'px';
                const dropDownHeight = dropDown.offsetHeight;
                dropDownOpcoes.style.top = dropDown.offsetTop + dropDownHeight + 'px';
            }
        });
    }

    /**
     * Adiciona ouvintes de eventos aos √≠cones de seta para baixo para abrir e fechar os dropdowns.
     */
    addIconClickListeners() {
        const iconCaretDowns = document.querySelectorAll(this.iconCaretDownSelector);

        iconCaretDowns.forEach((iconCaretDown, index) => {
            iconCaretDown.addEventListener('click', () => {
                this.toggleDropdown(index);
                this.toggleIconCaretDownActive(iconCaretDown);
            });
        });

        const btnOpcoes = document.querySelectorAll(this.btnOpcaoSelector);

        btnOpcoes.forEach((btnOpcao) => {
            btnOpcao.addEventListener('click', () => {
                const opcaoConteudo = btnOpcao.querySelector(this.opcaoSelector).textContent;
                const dropDownOpcoes = btnOpcao.closest(this.dropDownOpcoesSelector);

                if (dropDownOpcoes) {
                    const dropdownInput = dropDownOpcoes.previousElementSibling.querySelector(this.dropdownInputSelector);

                    if (dropdownInput) {
                        dropdownInput.value = opcaoConteudo;

                        if (dropdownInput.value.trim() !== '') {
                            const dropDown = dropDownOpcoes.previousElementSibling;
                            const iconFilter = dropDown.querySelector(this.iconFilterClass);
                            const iconFilterSlash = dropDown.querySelector(this.iconFilterSlashClass);
                            const iconCaretDown = dropDown.querySelector(this.iconCaretDownClass);

                            if (iconFilter && iconFilterSlash) {
                                iconFilterSlash.classList.remove(this.ocultarClass);
                                iconFilter.classList.add(this.ocultarClass);
                            }

                            dropDownOpcoes.classList.remove(this.dropDownOpcoesActiveClass);

                            if (iconCaretDown) {
                                iconCaretDown.classList.remove(this.iconCaretDownActiveClass);
                            }
                        }
                    }

                    const hiddenInput = dropDownOpcoes.previousElementSibling.querySelector(this.hiddenInputSelector);
                    const opcaoAtributo = btnOpcao.querySelector(this.opcaoSelector).getAttribute('opcao');

                    if (hiddenInput) {
                        hiddenInput.value = opcaoAtributo;
                    }
                }
            });
        });
    }

    /**
     * Alterna a exibi√ß√£o das op√ß√µes do dropdown.
     * @param {number} index - O √≠ndice do dropdown a ser alternado.
     */
    toggleDropdown(index) {
        const dropDown = this.dropDowns[index];
        const dropDownOpcoes = dropDown.nextElementSibling;

        if (dropDownOpcoes) {
            dropDown.classList.toggle(this.dropDownOpcoesActiveClass);
            const allDropdownOpcoes = document.querySelectorAll(this.dropDownOpcoesSelector);

            allDropdownOpcoes.forEach((dropdownOpcao) => {
                if (dropdownOpcao !== dropDownOpcoes) {
                    dropdownOpcao.classList.remove(this.dropDownOpcoesActiveClass);
                }
            });

            dropDownOpcoes.classList.toggle(this.dropDownOpcoesActiveClass);
        }
    }

    /**
     * Alterna a classe CSS ativa nos √≠cones de seta para baixo.
     * @param {HTMLElement} iconCaretDown - O √≠cone de seta para baixo a ser alternado.
     */
    toggleIconCaretDownActive(iconCaretDown) {
        iconCaretDown.classList.toggle(this.iconCaretDownActiveClass);
    }

    /**
     * Imprime informa√ß√µes sobre os dropdowns no console.
     */
    printDropdowns() {
        this.dropDowns.forEach((dropDown, index) => {
            const dropDownHTML = dropDown.outerHTML;
            const dropDownOpcoes = dropDown.nextElementSibling;
            const dropDownOpcoesHTML = dropDownOpcoes ? dropDownOpcoes.outerHTML : 'Nenhum drop-down-opcoes correspondente';

            const dropDownWidth = dropDown.offsetWidth;
            const dropDownOpcoesWidth = dropDownOpcoes ? dropDownOpcoes.offsetWidth : 0;
            const dropDownX = dropDown.offsetLeft;
            const dropDownY = dropDown.offsetTop;

            console.log(`Index: ${index}`);
            console.log('Drop-down HTML:', dropDownHTML);
            console.log('Drop-down-opcoes HTML:', dropDownOpcoesHTML);
            console.log('Largura do Drop-down:', dropDownWidth + 'px');
            console.log('Largura do Drop-down-opcoes:', dropDownOpcoesWidth + 'px');
            console.log('Posi√ß√£o do Drop-down (X, Y):', `(${dropDownX}px, ${dropDownY}px)`);

            const dropDownOpcoesX = dropDownOpcoes ? dropDownOpcoes.offsetLeft : 0;
            const dropDownOpcoesY = dropDownOpcoes ? dropDownOpcoes.offsetTop : 0;

            console.log('Posi√ß√£o do Drop-down-opcoes (X, Y):', `(${dropDownOpcoesX}px, ${dropDownOpcoesY}px)`);
        });

        this.positionDropdownOpcoes();
    }
}

// Configura√ß√£o de exemplo para criar uma inst√¢ncia da classe DropdownManager.
const dropdownManager = {
    dropDownSelector: '.drop-down',
    iconFilterSlashSelector: '.icon-filter-slash',
    btnOpcaoSelector: '.btn-opcao',
    opcaoSelector: '.opcao',
    iconCaretDownSelector: '.icon-caret-down',
    dropDownOpcoesSelector: '.drop-down-opcoes',
    defaultText: 'Escolher Op√ß√£o',
    dropdownInputSelector: 'input[readonly]',
    hiddenInputSelector: 'input[type="hidden"]',
    iconFilterClass: '.icon-filter',
    iconFilterSlashClass: '.icon-filter-slash',
    iconCaretDownClass: '.icon-caret-down',
    ocultarClass: 'ocultar',
    dropDownOpcoesActiveClass: 'drop-down-opcoes-active',
    iconCaretDownActiveClass: 'icon-caret-down-active'
};

// Cria uma inst√¢ncia da classe DropdownManager com a configura√ß√£o fornecida.
new DropdownManager(dropdownManager);

```

### Ilustra√ß√£o
---
![00 34  -s-backend  üî∏üëç Implementa√ß√£o da classe DropdownManager](https://github.com/H7-Dev/README.X/assets/93455937/dffefe07-6f0e-4d4c-8146-af9c5bf0d6dd)

