# √çndices:

1. [Como adicionar Filtro para o m√©todo GetBaralhos](#como-adicionar-filtro-para-o-m√©todo-getbaralhos)
2. [Mostrar uma mensagem caso nenhum registro seja encontrado](#mostrar-uma-mensagem-caso-nenhum-registro-seja-encontrado)
<<<<<<< HEAD
3. [Como usar os "Sanitize Filters" (Filtros de Sanitiza√ß√£o)](#como-usar-os-sanitize-filters-filtros-de-sanitiza√ß√£o)

=======
>>>>>>> 3169db1f791f0d9edbb561c30dfc843bdd889a6f


Agora voc√™ pode clicar nos links acima para navegar diretamente para as se√ß√µes desejadas do texto em Markdown.
# Como adicionar Filtro para o m√©todo GetBaralhos

Para ajustar o m√©todo `GetBaralhos` da classe `HomeDAO` de forma que ele seja capaz de realizar uma consulta usando o operador `LIKE` no campo `c_bar` e aceitar filtros vazios, voc√™ pode fazer o seguinte:

```php
function GetBaralhos($filtro = "")
{
    $query = "SELECT * FROM tb_baralhos";

    // Verifique se um filtro foi fornecido
    if (!empty($filtro)) {
        $query .= " WHERE c_bar LIKE :filtro";
        $params = array(':filtro' => '%' . $filtro . '%');
    } else {
        $params = null; // Sem filtro, par√¢metros nulos
    }

    $query .= " ORDER BY idBar ASC";
    $this->ExecuteSQL($query, $params);
    $this->GetLista();
}
```

Este m√©todo permite que voc√™ passe uma string de filtro como par√¢metro. Se a string de filtro estiver vazia, nenhuma cl√°usula `WHERE` ser√° adicionada √† consulta, resultando na sele√ß√£o de todos os registros. Se a string de filtro n√£o estiver vazia, a cl√°usula `WHERE` ser√° adicionada, e a consulta ser√° filtrada com base no campo `c_bar`.

Voc√™ pode usar o m√©todo da seguinte forma:

```php
$baralhos = new HomeDAO();
$resultado = $baralhos->GetBaralhos("Portugu√™s"); // Filtrar por "Portugu√™s"
```

ou

```php
$baralhos = new HomeDAO();
$resultado = $baralhos->GetBaralhos(); // Sem filtro, retorna todos os registros
```

Certifique-se de chamar o m√©todo `GetBaralhos` com o filtro desejado ou sem filtro, conforme necess√°rio para a sua aplica√ß√£o. Certifique-se tamb√©m de que os valores no banco de dados correspondam √† string de filtro que voc√™ est√° procurando.


# Mostrar uma mensagem caso nenhum registro seja encontrado

**[00.41 [-s-backend] üî∏ Implementa√ß√£o do M√©todo GetBaralhos](https://github.com/H7-Dev/Flash-card-bars-ALFA/commit/080dff9fa02007ef978c7d693f9b4dd4546b1e6d#commitcomment-127541289)**


**Feature:** Exibi√ß√£o de Mensagem "Nenhum Registro Encontrado" no Template `home.tpl`

**Descri√ß√£o da Feature:**

Esta feature tem como foco a atualiza√ß√£o do template `home.tpl` para melhorar a experi√™ncia do usu√°rio quando nenhum registro correspondente √† pesquisa √© encontrado durante a pesquisa de baralhos. A mensagem "Nenhum registro encontrado" ser√° exibida de forma clara e informativa para notificar o usu√°rio sobre a aus√™ncia de resultados.

**Detalhes da Implementa√ß√£o:**

- Adi√ß√£o de uma verifica√ß√£o no template `home.tpl` para verificar se a vari√°vel que cont√©m os resultados da pesquisa est√° vazia.
- Quando nenhum registro for encontrado (vari√°vel de resultados vazia), a mensagem "Nenhum registro encontrado" ser√° exibida em vez da tabela de baralhos.
- A mensagem ser√° apresentada de forma vis√≠vel e leg√≠vel para o usu√°rio, garantindo uma experi√™ncia de usu√°rio mais amig√°vel e informativa.

Essa atualiza√ß√£o no template `home.tpl` contribui para uma experi√™ncia mais eficaz e transparente ao realizar pesquisas, permitindo que os usu√°rios compreendam facilmente que a consulta n√£o produziu resultados correspondentes √†s suas expectativas.

L√≥gica
=====
Para mostrar uma mensagem caso nenhum registro seja encontrado, voc√™ pode fazer algumas altera√ß√µes na estrutura do projeto e nos c√≥digos das classes PHP. Primeiro, vamos rever a estrutura do projeto e depois implementar a funcionalidade de exibir uma mensagem quando n√£o houver registros.

A estrutura do projeto que voc√™ forneceu inclui os seguintes diret√≥rios:

```
CONTROLLER
LIB
MODEL
VIEW
.htaccess
composer.json
composer.lock
composer.phar
composerUpdate.bat
erro.php
home.php
index.php
README.MD
web-icon.png
```

Voc√™ tem os diret√≥rios `CONTROLLER`, `MODEL`, `VIEW`, e alguns arquivos na raiz do projeto.

Vamos prosseguir com a implementa√ß√£o da mensagem de nenhum registro encontrado. Primeiro, vou mostrar como voc√™ pode fazer isso no seu c√≥digo PHP:

1. **No arquivo `home.tpl` (ou no arquivo onde voc√™ exibe a tabela):**

   Voc√™ pode adicionar uma verifica√ß√£o para verificar se h√° registros antes de exibir a tabela. Caso n√£o haja registros, voc√™ pode exibir uma mensagem.

   ```php
   {if count($BAR) > 0}
   <div class="containerTable">
       <!-- Seus c√≥digos de tabela aqui -->
   </div>
   {else}
   <p>Nenhum registro encontrado.</p>
   {/if}
   ```

   O c√≥digo acima verifica se a vari√°vel `$BAR` cont√©m algum registro. Se n√£o houver registros (o `count($BAR)` for igual a zero), ele exibir√° a mensagem "Nenhum registro encontrado."

2. **No m√©todo `GetBaralhos` da classe `HomeDAO` (para retornar uma mensagem quando nenhum registro for encontrado):**

   Primeiro, voc√™ precisa modificar o m√©todo `GetBaralhos` para retornar os dados encontrados ou `false` quando nenhum registro for encontrado. Aqui est√° uma poss√≠vel modifica√ß√£o:

   ```php
   function GetBaralhos($filtro = "")
   {
       $query = "SELECT * FROM tb_baralhos";

       // Verifique se um filtro foi fornecido
       if (!empty($filtro)) {
           $query .= " WHERE c_bar LIKE :filtro";
           $params = array(':filtro' => '%' . $filtro . '%');
       } else {
           $params = null; // Sem filtro, par√¢metros nulos
       }

       $query .= " ORDER BY idBar ASC";
       $this->ExecuteSQL($query, $params);

       $resultados = $this->GetLista();

       // Verifique se h√° resultados
       if ($resultados && count($resultados) > 0) {
           return $resultados;
       } else {
           return false; // Nenhum registro encontrado
       }
   }
   ```

    Com esta modifica√ß√£o, o m√©todo `GetBaralhos` retornar√° os resultados se houver registros correspondentes, ou `false` se nenhum registro for encontrado.
    Agora, ao chamar o m√©todo `GetBaralhos` no arquivo `home.php`, voc√™ pode verificar o valor retornado e exibir a mensagem "Nenhum registro encontrado" no seu template (`home.tpl`) conforme mencionado anteriormente.
    Com essas altera√ß√µes, voc√™ poder√° exibir uma mensagem quando n√£o houver registros encontrados em sua aplica√ß√£o. Certifique-se de que a estrutura da sua p√°gina e o c√≥digo PHP estejam organizados para lidar com essas situa√ß√µes de forma adequada.




<<<<<<< HEAD
# Como obter o valor do campo in_search_bar quando o formul√°rio √© enviado via m√©todo GetBaralhos

**[00.42 [-s-backend] üî∏ Implementa√ß√£o do M√©todo GetBaralhos](https://github.com/H7-Dev/Flash-card-bars-ALFA/commit/48fc9f1d3a0c22beb32faad8344aa62266d80616#commitcomment-127541949)**


Para obter o valor do campo `in_search_bar` quando o formul√°rio √© enviado via m√©todo POST e pass√°-lo como par√¢metro para o m√©todo `GetBaralhos` em PHP, voc√™ pode seguir estas etapas:

1. No arquivo PHP que processa o formul√°rio (provavelmente onde voc√™ chama `GetBaralhos`), voc√™ pode usar o superglobal `$_POST` para acessar os dados enviados via POST. O valor do campo `in_search_bar` pode ser obtido da seguinte maneira:

```php
$valorPesquisa = $_POST['in_search_bar'];
```

2. Agora que voc√™ tem o valor da pesquisa, voc√™ pode cham√°-lo como um par√¢metro para o m√©todo `GetBaralhos` da classe `HomeDAO`. Supondo que voc√™ j√° tenha criado uma inst√¢ncia da classe `HomeDAO`, voc√™ pode fazer algo assim:

```php
$baralhos = new HomeDAO();
$baralhos->GetBaralhos($valorPesquisa);
```


Desta forma, voc√™ est√° usando o valor da pesquisa para criar uma consulta SQL que usa o operador `LIKE` para encontrar correspond√™ncias parciais no campo `c_bar` da tabela `tb_baralhos`. Certifique-se de que a consulta seja executada com os par√¢metros apropriados.

Lembre-se de realizar as verifica√ß√µes necess√°rias para garantir a seguran√ßa dos dados do usu√°rio, como a valida√ß√£o do valor da pesquisa e a preven√ß√£o contra inje√ß√£o SQL, dependendo das necessidades do seu aplicativo.


# Como usar os "Sanitize Filters" (Filtros de Sanitiza√ß√£o) 

**[00.42 [-s-backend] üî∏‚ùóImplementa√ß√£o do M√©todo GetBaralhos](https://github.com/H7-Dev/Flash-card-bars-ALFA/commit/cfcb0767e1b5ca48fecc714c052dc4b5b67107c3#commitcomment-127543577)**

Os "Sanitize Filters" (Filtros de Sanitiza√ß√£o) s√£o uma parte importante da seguran√ßa e valida√ß√£o de dados em aplica√ß√µes web e em desenvolvimento de software em geral. Eles s√£o usados para limpar e formatar os dados de entrada do usu√°rio ou de outras fontes para garantir que esses dados sejam seguros, confi√°veis e adequados para uso em um aplicativo.

Aqui est√° para que servem os Sanitize Filters:

1. **Preven√ß√£o contra Inje√ß√£o de C√≥digo:** Um uso comum dos Sanitize Filters √© prevenir a inje√ß√£o de c√≥digo malicioso em um aplicativo, como o SQL Injection. Eles podem ser usados para remover ou escapar caracteres perigosos ou n√£o permitidos de strings de entrada, garantindo que os dados n√£o sejam interpretados como c√≥digo malicioso.

2. **Formata√ß√£o de Dados:** Os Sanitize Filters tamb√©m podem ser usados para formatar dados de entrada de forma consistente. Por exemplo, eles podem ser usados para formatar datas, n√∫meros ou valores monet√°rios de acordo com um padr√£o espec√≠fico.

3. **Valida√ß√£o de Dados:** Al√©m de limpar os dados, os Sanitize Filters tamb√©m podem ser usados para validar se os dados atendem a crit√©rios espec√≠ficos. Por exemplo, verificar se um endere√ßo de e-mail est√° no formato correto ou se um n√∫mero de telefone cont√©m apenas d√≠gitos v√°lidos.

4. **Seguran√ßa Geral:** Sanitizar dados √© uma pr√°tica importante para garantir a seguran√ßa geral de um aplicativo. Dados n√£o sanitizados podem ser usados para explorar vulnerabilidades, como Cross-Site Scripting (XSS) ou Cross-Site Request Forgery (CSRF).

5. **Melhorar a Qualidade dos Dados:** Al√©m de quest√µes de seguran√ßa, a sanitiza√ß√£o tamb√©m pode melhorar a qualidade dos dados em um aplicativo, removendo espa√ßos em branco extras, caracteres inv√°lidos ou formata√ß√£o inadequada.

6. **Garantir Integridade dos Dados:** Em sistemas de banco de dados, os Sanitize Filters podem ser usados para garantir que os dados inseridos atendam √†s restri√ß√µes de integridade do banco de dados, como comprimento m√°ximo de campo, tipos de dados corretos, etc.

Os Sanitize Filters s√£o especialmente importantes em linguagens de programa√ß√£o que s√£o vulner√°veis a ataques de inje√ß√£o, como PHP e SQL. Eles ajudam a mitigar muitos dos riscos associados √† manipula√ß√£o de dados de entrada em aplicativos web. No entanto, √© fundamental us√°-los de forma adequada e adequada ao contexto espec√≠fico do aplicativo para garantir a seguran√ßa e a funcionalidade.

Implementa√ß√£o `FILTER_SANITIZE_STRING`
=====

Para implementar a sanitiza√ß√£o do valor obtido a partir do campo `in_search_bar` que √© enviado via m√©todo POST, voc√™ pode usar a fun√ß√£o `filter_var` do PHP com o filtro apropriado. Neste caso, voc√™ pode usar o filtro `FILTER_SANITIZE_STRING` para garantir que o valor seja tratado como uma string segura. Aqui est√° um exemplo de como fazer isso:

```php
// Obt√©m o valor do campo in_search_bar via POST
$valorPesquisa = $_POST['in_search_bar'];

// Sanitiza o valor
$valorPesquisa = filter_var($valorPesquisa, FILTER_SANITIZE_STRING);

// Agora $valorPesquisa cont√©m a entrada sanitizada e segura
```

O c√≥digo acima primeiro obt√©m o valor do campo `in_search_bar` e, em seguida, usa `filter_var` com `FILTER_SANITIZE_STRING` para limpar qualquer conte√∫do potencialmente perigoso ou indesejado da vari√°vel `$valorPesquisa`. Isso garante que o valor seja tratado apenas como uma string segura para uso em consultas de banco de dados ou outras opera√ß√µes.

Lembrando que a sanitiza√ß√£o √© uma pr√°tica importante para garantir a seguran√ßa dos dados em seu aplicativo, mas voc√™ tamb√©m deve considerar outros fatores de seguran√ßa, como a preven√ß√£o de SQL Injection, ao usar os dados sanitizados em consultas de banco de dados. √â recomend√°vel usar consultas preparadas (prepared statements) ou fun√ß√µes de escape apropriadas ao inserir dados em seu banco de dados.

Entendi sua preocupa√ß√£o. De fato, o filtro `FILTER_SANITIZE_STRING` pode n√£o ser a op√ß√£o mais robusta ou espec√≠fica em todos os casos de sanitiza√ß√£o de strings, e existem alternativas mais seguras e espec√≠ficas para tratar dados de entrada. Uma dessas alternativas √© o uso de fun√ß√µes de sanitiza√ß√£o espec√≠ficas, como `htmlspecialchars` ou `strip_tags`, que oferecem maior controle sobre o tipo de limpeza que voc√™ deseja aplicar aos dados.

Alternativas ao `FILTER_SANITIZE_STRING`
=======

Aqui est√£o algumas alternativas ao `FILTER_SANITIZE_STRING` com um breve resumo de seus prop√≥sitos:

1. `htmlspecialchars`: Esta fun√ß√£o converte caracteres especiais em entidades HTML. √â √∫til para evitar ataques de Cross-Site Scripting (XSS) e manter a formata√ß√£o HTML segura.

    ```php
    $valorPesquisa = htmlspecialchars($_POST['in_search_bar'], ENT_QUOTES, 'UTF-8');
    ```

2. `strip_tags`: Essa fun√ß√£o remove todas as tags HTML de uma string. √â √∫til se voc√™ deseja remover completamente qualquer formata√ß√£o HTML.

    ```php
    $valorPesquisa = strip_tags($_POST['in_search_bar']);
    ```

3. Consultas Preparadas (Prepared Statements): Se voc√™ est√° inserindo dados em um banco de dados, a melhor pr√°tica √© usar consultas preparadas, pois elas evitam ataques de SQL Injection. Consultas preparadas usam placeholders para inserir dados de forma segura no SQL.

    ```php
    $stmt = $pdo->prepare("SELECT * FROM tabela WHERE coluna = ?");
    $stmt->execute([$valorPesquisa]);
    ```


A escolha da t√©cnica de sanitiza√ß√£o depende das necessidades espec√≠ficas do seu aplicativo e do contexto em que os dados ser√£o usados. Certifique-se de entender os requisitos de seguran√ßa e sanitiza√ß√£o para tomar a decis√£o mais adequada.


Como seria um ataque com sql?
=============================

Um ataque de SQL Injection √© uma explora√ß√£o de vulnerabilidade em que um invasor manipula as entradas de um aplicativo para executar comandos SQL n√£o autorizados no banco de dados. Isso ocorre quando um aplicativo web n√£o trata adequadamente as entradas do usu√°rio antes de incorpor√°-las em consultas SQL. Um ataque de SQL Injection pode permitir que um invasor:

1. **Visualize Dados Confidenciais:** Um invasor pode obter acesso a informa√ß√µes confidenciais no banco de dados, como senhas, informa√ß√µes pessoais de usu√°rios ou outros dados sens√≠veis.

2. **Modifique Dados:** Um invasor pode modificar ou excluir registros no banco de dados, alterando o conte√∫do das consultas SQL.

3. **Executar Comandos Arbitr√°rios:** Com um ataque de SQL Injection bem-sucedido, um invasor pode executar comandos SQL arbitr√°rios no banco de dados, o que pode levar a resultados prejudiciais, como corrup√ß√£o de dados ou desativa√ß√£o do sistema.

4. **Escapar do Ambiente Seguro:** Em alguns casos, um ataque de SQL Injection pode permitir que um invasor escape do ambiente seguro da aplica√ß√£o e acesse o sistema subjacente.

Aqui est√° um exemplo simples de como um ataque de SQL Injection pode ocorrer:

Suponha que um aplicativo web tenha uma p√°gina de login onde os usu√°rios inserem seu nome de usu√°rio e senha. A aplica√ß√£o pode criar uma consulta SQL da seguinte forma (usando PHP como exemplo):

```php
$sql = "SELECT * FROM usuarios WHERE nome_usuario = '" . $_POST['nome_usuario'] . "' AND senha = '" . $_POST['senha'] . "'";
```

Se um invasor inserir o seguinte como entrada para o campo "nome_usuario":

```
' OR '1'='1
```

A consulta SQL resultante ser√°:

```sql
SELECT * FROM usuarios WHERE nome_usuario = '' OR '1'='1' AND senha = 'senha'
```

Nesse caso, a condi√ß√£o `'1'='1'` sempre √© verdadeira, o que significa que a consulta retornar√° todos os registros de usu√°rios, permitindo que o invasor acesse o sistema sem fornecer uma senha v√°lida.

Para evitar ataques de SQL Injection, √© fundamental usar pr√°ticas de seguran√ßa, como:

- Usar consultas preparadas (prepared statements) com par√¢metros vinculados.
- Validar e filtrar todas as entradas de usu√°rio.
- N√£o concatenar diretamente entradas de usu√°rio em consultas SQL.
- Limitar privil√©gios do banco de dados para a aplica√ß√£o.
- Manter o sistema e todas as bibliotecas/frameworks atualizados.
- Monitorar e registrar atividades suspeitas.

Como est√° sendo implementar neste projeto

```PHP
<?php
// Inicializar o objeto Smarty
$smarty = new Template();

// Obter o valor de "in_search_bar" do formul√°rio POST e sanitiz√°-lo
$valorPesquisa = htmlspecialchars($_POST['in_search_bar'], ENT_QUOTES, 'UTF-8');

// Criar uma inst√¢ncia da classe HomeDAO
$baralhos = new HomeDAO();

// Chamar o m√©todo GetBaralhos da classe HomeDAO com o valor de pesquisa
$baralhos->GetBaralhos($valorPesquisa);

// Atribuir vari√°veis Smarty
$smarty->assign('TESTAR_SMARTY_ASSIGN', 'Testar smarty Assign');
$smarty->assign('BAR', $baralhos->GetItens());

// Exibir o template "home.tpl"
$smarty->display('home.tpl');
```


Observa√ß√µes
========
Na data deste **16/09/2023** O filtro `FILTER_SANITIZE_STRING` n√£o √© ultrapassado; ele ainda √© amplamente utilizado e v√°lido para sanitiza√ß√£o de strings. No entanto, existem v√°rias formas de sanitizar strings em PHP, e a escolha do filtro ou m√©todo depende do contexto espec√≠fico e dos requisitos de seguran√ßa do seu aplicativo.

Al√©m do `FILTER_SANITIZE_STRING`, voc√™ tamb√©m pode considerar outras t√©cnicas de sanitiza√ß√£o, como usar fun√ß√µes como `htmlspecialchars` ou `strip_tags` para tratar strings de maneira mais espec√≠fica, dependendo das suas necessidades de seguran√ßa e formata√ß√£o.

Portanto, o uso do `FILTER_SANITIZE_STRING` n√£o est√° ultrapassado e ainda √© v√°lido para muitos casos de sanitiza√ß√£o de strings em PHP. Certifique-se apenas de escolher a t√©cnica mais apropriada com base nos requisitos do seu projeto.
=======
>>>>>>> 3169db1f791f0d9edbb561c30dfc843bdd889a6f
